function _api(t) {
    this.apiUrl = t.baseUrl + "/api/plugin/v1";
    var e = this;
    this._init = function () {
        $.ajaxSetup({
            beforeSend: function (e) {
                e.setRequestHeader("Smarty-Plugin-Version", t.v), e.setRequestHeader("Smarty-Plugin-Browser", t.browser)
            }
        })
    },
        this._request = function (t, e, n, i) {
        n || (n = "get"), e || (e = {}), $[n](this.apiUrl + "/" + t, e, function (t) {
            i && i(t)
        }, "json")
    },
        this.get = function (t, e, n) {
        this._request(t, e, "get", n)
    },
        this.post = function (t, e, n) {
        this._request(t, e, "post", n)
    },
        this.sendStat = function () {
        var t = [];
        chrome.management.getAll(function (n) {
            $.each(n, function (e, n) {
                "extension" === n.type && t.push({
                    name: n.name,
                    short_name: n.shortName,
                    enabled: n.enabled ? 1 : 0,
                    plugin_id: n.id
                })
            }), e.post("stat/plugins", {plugins: t}, function () {
                chrome.storage.local.set({lastStatSended: tmpstmp()})
            })
        })
    },
        this._init(t)
}